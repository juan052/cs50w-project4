{% extends "layout.html" %}
{% block main %}
<div class="xp-breadcrumbbar text-center">
    <h4 class="page-title" style="color:black">Productos</h4>
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Gestion de
                productos</a></li>
        <li class="breadcrumb-item active"
            aria-current="page">Sub categorias</li>
    </ol>
</div>

<div class="row">

    <div class="col-md-12">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-6 p-0 d-flex
                        justify-content-lg-start
                        justify-content-center">
                        <h2 class="ml-lg-2">Gestion de
                            productos</h2>
                    </div>
                    <div class="col-sm-6 p-0 d-flex
                        justify-content-lg-end
                        justify-content-center">
                        <a href="#addEmployeeModal"
                            class="btn btn-success"
                            data-toggle="modal">
                            <i class="material-icons">&#xE147;</i>
                            <span>Agregar sub categorias</span></a>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover" id="datatable_users">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Categoría</th>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for subcategoria in subcategorias %}
                    <tr>
                        <td>{{ subcategoria.id }}</td>
                        <td>{{ subcategoria.categoria.nombre }}</td>
                        <td>{{ subcategoria.nombre }}</td>
                        <td>{{ subcategoria.descripcion }}</td>
                        <td>
                             
                            {% if subcategoria.estado == 1 %}
                            Activo
                            {% elif subcategoria.estado == 2 %}
                            Inactivo
                            {% endif %}
                        </td>
                        <td>
                            <a href="#editEmployeeModal{{subcategoria.id}}"
                                class="edit"
                                data-toggle="modal">
                                <i class="material-icons"
                                    data-toggle="tooltip"
                                    title="Editar">&#xE254;</i>
                            </a>
                            <a href="#deleteEmployeeModal{{subcategoria.id}}"
                                class="delete"
                                data-toggle="modal">
                                <i class="material-icons"
                                    data-toggle="tooltip"
                                    title="Eliminar">&#xE872;</i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
        </div>
    </div>
    <!-- Edit Modal HTML -->
    <div id="addEmployeeModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/crear_sub" method="post">
                    <div class="modal-header">
                        <h4 class="modal-title">Crear sub categorias</h4>
                        <button type="button" class="close"
                            data-dismiss="modal"
                            aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>Categoria</label>
                            <select name="categoria" id=""
                                class="form-control">
                                {% for categoria in categorias %}
                                <option value="{{categoria.id}}">{{categoria.nombre}}</option>
                                
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Nombre</label>
                            <input type="text" name="nombre"
                                class="form-control"
                                required>
                        </div>
                       
                        <div class="form-group">
                            <label>Descripcion</label>
                            <textarea name="descripcion" class="form-control"
                                required></textarea>
                        </div>
                        <div class="form-group">
                            <label>Estado</label>
                            <select name="estado" id=""
                                class="form-control">
                                <option value="1">Activo</option>
                                <option value="2">Inactivo</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn
                            btn-default"
                            data-dismiss="modal"
                            value="Cancelar">
                        <input type="submit" class="btn
                            btn-success" value="Crear">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Edit Modal HTML -->
    {% for subcategoria in subcategorias %}
    <div id="editEmployeeModal{{subcategoria.id}}" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/sub_actualizar/{{subcategoria.id}}" method="post">
                    <div class="modal-header">
                        <h4 class="modal-title">Editar sub categorias</h4>
                        <button type="button" class="close"
                            data-dismiss="modal"
                            aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>Categoria</label>
                            <select name="categoria" id="categoria" class="form-control">
                                {% for categoria in categorias %}
                                    <option value="{{categoria.id}}" {% if categoria.id == subcategoria.categoria.id %}selected{% endif %}>{{categoria.nombre}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Nombre</label>
                            <input type="text" name="nombre" id="nombre"  value="{{subcategoria.nombre}}" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Descripcion</label>
                            <textarea id="descripcion" name="descripcion" class="form-control" required>{{subcategoria.descripcion}}</textarea>
                        </div>
                        <div class="form-group">
                            <label>Estado</label>
                            <select name="estado" id=""
                                class="form-control">
                                <option value="1" {% if subcategoria.estado == 1 %}selected{% endif %}>Activo</option>
                                <option value="2" {% if subcategoria.estado == 2 %}selected{% endif %}>Inactivo</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn
                            btn-default"
                            data-dismiss="modal"
                            value="Cancel">
                        <input type="submit" class="btn
                            btn-info" value="Save">
                    </div>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}

    {% for subcategoria in subcategorias %}
    <!-- Delete Modal HTML -->
    <div id="deleteEmployeeModal{{subcategoria.id}}" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/eliminar_sub" method="post">
                    <div class="modal-header">
                        <h4 class="modal-title">Eliminar sub</h4>
                        <button type="button" class="close"
                            data-dismiss="modal"
                            aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">
                        <input type="text" name="id" value="{{subcategoria.id}}"id="" hidden>
                        <p>Estas seguros que quieres eliminar?</p>
                        <p class="text-warning"><small>This
                                action cannot be
                                undone.</small></p>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn
                            btn-default"
                            data-dismiss="modal"
                            value="Cancel">
                        <input type="submit" class="btn
                            btn-danger"
                            value="Delete">
                    </div>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}

</div>

<!---footer---->


</div>
{% endblock %}